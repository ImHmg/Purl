Kind: Suite
Name: User Creation Suite
DataSources: ../data/create_users.csv
Configs:
  - Dev
Vars:
  api_version: v1
  client_version: 1.0.0
Requests:
  - ../requests/create_user.yaml
  - ../requests/get_user.yaml
Options:
  timeout: 30



---


Kind: Configs
Name: Dev
Configs:
  base_url: http://localhost:3000
  authorization_token: Bearer dev_auth_token_12345
  api_token: dev_token_11111
  api_version: v1
  page_size: 10
  default_timeout: 30



---



Kind: Request
Name: Create-User
Method: POST
Endpoint: ${base_url}/api/${api_version}/users
Status: 201

Headers:
  Content-Type: application/json
  Accept: application/json
  X-Client-Version: ${client_version}

JsonBody: |
  {
    "id": "${user_id}",
    "name": "${user_name}",
    "email": "${user_email}",
    "phone": "${user_phone}",
    "profile": {
      "plan": "${plan}",
      "locale": "${locale}"
    },
    "preferences": {
      "newsletter": "${newsletter}"
    }
  }

Captures:
  created_user_id: "@body jsonpath $.id"
  created_user_email: "@body jsonpath $.email"

Asserts:
  email matches payload: "@body jsonpath $.email |==| ${user_email}"


---


Kind: Request
Name: Get-User
Method: GET
Endpoint: ${base_url}/api/${api_version}/users/${created_user_id}

Headers:
  Accept: application/json

Asserts:
  status is 200: "@status |==| 200"
  id matches captured: "@body jsonpath $.id |==| ${created_user_id}"
