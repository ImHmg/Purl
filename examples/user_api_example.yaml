# User API Example
# Demonstrates POST request to create a user with JSON body

Define:
  userEmail: "${fake.email()}"
  userName: "${fake.name()}"
  userId: "${fake.uuid4()}"
  timestamp: "${fake.iso8601()}"
  userPhone: "${fake.random_number(10)}"

Method: POST
Endpoint: ${base_url}/api/v1/users

Headers:
  Authorization: ${authorization_token}
  Content-Type: application/json
  X-Request-ID: ${fake.uuid4()}
  X-Client-Version: 1.0.0

JsonBody: |
  {
    "name": "${userName}",
    "email": "${userEmail}",
    "phone": "${userPhone}",
    "profile": {
      "bio": "Test user created via purl",
      "location": "San Francisco, CA"
    },
    "preferences": {
      "theme": "dark",
      "notifications": true
    },
    "metadata": {
      "created_at": "${timestamp}",
      "source": "purl-cli"
    }
  }

Captures:
  userId: "@body jsonpath $.id"
  userEmail: "@body jsonpath $.email"
  statusCode: "@status"
  responseTime: "@time"

Asserts:
  "status code is 201": "@status |==| 201"
  "response has user id": "@body jsonpath $.id"
  "email matches": "@body jsonpath $.email |==| ${userEmail}"

Options:
  timeout: 30
  insecure: false
